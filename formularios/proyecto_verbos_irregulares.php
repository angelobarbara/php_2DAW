<?php

    $verbos = array(
        array("infinitivo"=>"arise","Pasado"=>"arose","participio"=>"arisen","traduccion"=>"Elevarse"),
        array("infinitivo"=>"awake","Pasado"=>"awoke","participio"=>"awoken","traduccion"=>"Despertar"),
        array("infinitivo"=>"bear","Pasado"=>"bore","participio"=>"born","traduccion"=>"Soportar"),
        array("infinitivo"=>"beat","Pasado"=>"beat","participio"=>"beaten","traduccion"=>"golpear"),
        array("infinitivo"=>"become","Pasado"=>"became","participio"=>"become","traduccion"=>"Hacerse"),
        array("infinitivo"=>"begin","Pasado"=>"began","participio"=>"begun","traduccion"=>"Empezar"),
        array("infinitivo"=>"bend","Pasado"=>"bent","participio"=>"bent","traduccion"=>"Doblar"),
        array("infinitivo"=>"bet","Pasado"=>"bet","participio"=>"bet","traduccion"=>"Apostar"),
        array("infinitivo"=>"bind","Pasado"=>"bound","participio"=>"bound","traduccion"=>"Atar"),
        array("infinitivo"=>"bite","Pasado"=>"bit","participio"=>"bitten","traduccion"=>"Morder."),
        array("infinitivo"=>"blow","Pasado"=>"blew","participio"=>"blown","traduccion"=>"Soplar"),
        array("infinitivo"=>"break","Pasado"=>"broke","participio"=>"broken","traduccion"=>"Quebrar"),
        array("infinitivo"=>"bring","Pasado"=>"brought","participio"=>"brought","traduccion"=>"Traer"),
        array("infinitivo"=>"build","Pasado"=>"built","participio"=>"built","traduccion"=>"Construir"),
        array("infinitivo"=>"burn","Pasado"=>"burnt","participio"=>"burnt","traduccion"=>"Quemar"),
        array("infinitivo"=>"burst","Pasado"=>"burst","participio"=>"burst","traduccion"=>"Romper"),
        array("infinitivo"=>"buy","Pasado"=>"bought","participio"=>"bought","traduccion"=>"Comprar"),
        array("infinitivo"=>"catch","Pasado"=>"caught","participio"=>"caught","traduccion"=>"Coger"),
        array("infinitivo"=>"choose","Pasado"=>"chose","participio"=>"chosen","traduccion"=>"Escoger"),
        array("infinitivo"=>"cling","Pasado"=>"clung","participio"=>"clung","traduccion"=>"Asirse"),
        array("infinitivo"=>"come","Pasado"=>"came","participio"=>"come","traduccion"=>"Venir"),
        array("infinitivo"=>"cost","Pasado"=>"cost","participio"=>"cost","traduccion"=>"Costar"),
        array("infinitivo"=>"creep","Pasado"=>"crept","participio"=>"crept","traduccion"=>"Arrastrarse"),
        array("infinitivo"=>"cut","Pasado"=>"cut","participio"=>"cut","traduccion"=>"Cortar"),
        array("infinitivo"=>"deal","Pasado"=>"dealt","participio"=>"dealt","traduccion"=>"Tratar"),
        array("infinitivo"=>"dig","Pasado"=>"dug","participio"=>"dug","traduccion"=>"Cavar"),
        array("infinitivo"=>"do","Pasado"=>"did","participio"=>"done","traduccion"=>"Hacer"),
        array("infinitivo"=>"draw","Pasado"=>"drew","participio"=>"drawn","traduccion"=>"Tirar"),
        array("infinitivo"=>"drink","Pasado"=>"drank","participio"=>"drunk","traduccion"=>"Beber"),
        array("infinitivo"=>"drive","Pasado"=>"drove","participio"=>"driven","traduccion"=>"conducir"),
        array("infinitivo"=>"fall","Pasado"=>"fell","participio"=>"fallen","traduccion"=>"Caer"),
        array("infinitivo"=>"feed","Pasado"=>"fed","participio"=>"fed","traduccion"=>"Alimentar"),
        array("infinitivo"=>"feel","Pasado"=>"felt","participio"=>"felt","traduccion"=>"Sentir"),
        array("infinitivo"=>"fight","Pasado"=>"fought","participio"=>"fought","traduccion"=>"Pelear"),
        array("infinitivo"=>"find","Pasado"=>"found","participio"=>"found","traduccion"=>"Encontrar"),
        array("infinitivo"=>"find out","Pasado"=>"found out","participio"=>"found out","traduccion"=>"Averiguar"),
        array("infinitivo"=>"flee","Pasado"=>"fled","participio"=>"fled","traduccion"=>"Escapar"),
        array("infinitivo"=>"fly","Pasado"=>"flew","participio"=>"flown","traduccion"=>"Volar"),
        array("infinitivo"=>"forbid","Pasado"=>"forbade","participio"=>"forbidden","traduccion"=>"Prohibir"),
        array("infinitivo"=>"foresee","Pasado"=>"foresaw","participio"=>"foreseen","traduccion"=>"prevenir"),
        array("infinitivo"=>"forget","Pasado"=>"forgot","participio"=>"forgotten","traduccion"=>"Olvidar"),
        array("infinitivo"=>"forgive","Pasado"=>"forgave","participio"=>"forgiven","traduccion"=>"Perdonar"),
        array("infinitivo"=>"freeze","Pasado"=>"froze","participio"=>"frozen","traduccion"=>"Congelar"),
        array("infinitivo"=>"get","Pasado"=>"got","participio"=>"got (ten)","traduccion"=>"Lograr"),
        array("infinitivo"=>"give","Pasado"=>"gave","participio"=>"given","traduccion"=>"Dar"),
        array("infinitivo"=>"go","Pasado"=>"went","participio"=>"gone","traduccion"=>"funcionar"),
        array("infinitivo"=>"grind","Pasado"=>"ground","participio"=>"ground","traduccion"=>"Moler"),
        array("infinitivo"=>"grow","Pasado"=>"grew","participio"=>"grown","traduccion"=>"Crecer"),
        array("infinitivo"=>"hang","Pasado"=>"hung","participio"=>"hung","traduccion"=>"Colgar"),
        array("infinitivo"=>"have","Pasado"=>"had","participio"=>"had","traduccion"=>"Tener"),
        array("infinitivo"=>"hear","Pasado"=>"heard","participio"=>"heard","traduccion"=>"OÃ­r"),
        array("infinitivo"=>"hide","Pasado"=>"hid","participio"=>"hid (den)","traduccion"=>"Ocultar"),
        array("infinitivo"=>"hit","Pasado"=>"hit","participio"=>"hit","traduccion"=>"Pegar"),
        array("infinitivo"=>"hold","Pasado"=>"held","participio"=>"held","traduccion"=>"Sostener"),
        array("infinitivo"=>"hurt","Pasado"=>"hurt","participio"=>"hurt","traduccion"=>"Herir"),
        array("infinitivo"=>"keep","Pasado"=>"kept","participio"=>"kept","traduccion"=>"Mantener"),
        array("infinitivo"=>"know","Pasado"=>"knew","participio"=>"known","traduccion"=>"Saber"),
        array("infinitivo"=>"lay","Pasado"=>"laid","participio"=>"laid","traduccion"=>"Poner"),
        array("infinitivo"=>"lead","Pasado"=>"led","participio"=>"led","traduccion"=>"Guiar"),
        array("infinitivo"=>"lean","Pasado"=>"leant","participio"=>"leant","traduccion"=>"Inclinar"),
        array("infinitivo"=>"learn","Pasado"=>"learnt","participio"=>"learnt","traduccion"=>"Aprender"),
        array("infinitivo"=>"leave","Pasado"=>"left","participio"=>"left","traduccion"=>"Partir"),
        array("infinitivo"=>"lend","Pasado"=>"lent","participio"=>"lent","traduccion"=>"Prestar"),
        array("infinitivo"=>"let","Pasado"=>"let","participio"=>"let","traduccion"=>"Permitir"),
        array("infinitivo"=>"lie","Pasado"=>"lay","participio"=>"lain","traduccion"=>"Tenderse"),
        array("infinitivo"=>"light","Pasado"=>"lit","participio"=>"lit","traduccion"=>"Alumbrar"),
        array("infinitivo"=>"lose","Pasado"=>"lost","participio"=>"lost","traduccion"=>"Perder"),
        array("infinitivo"=>"make","Pasado"=>"made","participio"=>"made","traduccion"=>"Hacer"),
        array("infinitivo"=>"mean","Pasado"=>"meant","participio"=>"meant","traduccion"=>"Significar"),
        array("infinitivo"=>"meet","Pasado"=>"met","participio"=>"met","traduccion"=>"Encontrar"),
        array("infinitivo"=>"melt","Pasado"=>"melted","participio"=>"molten (old)","traduccion"=>"Derretir"),
        array("infinitivo"=>"mistake","Pasado"=>"mistook","participio"=>"mistaken","traduccion"=>"Equivocarse"),
        array("infinitivo"=>"misunderstand","Pasado"=>"misunderstood","participio"=>"misunderstood","traduccion"=>"mal entender"),
        array("infinitivo"=>"overcome","Pasado"=>"overcame","participio"=>"overcome","traduccion"=>"Vencer"),
        array("infinitivo"=>"pay","Pasado"=>"paid","participio"=>"paid","traduccion"=>"Pagar"),
        array("infinitivo"=>"put","Pasado"=>"put","participio"=>"put","traduccion"=>"Poner"),
        array("infinitivo"=>"read","Pasado"=>"read","participio"=>"read","traduccion"=>"Leer"),
        array("infinitivo"=>"rebuild","Pasado"=>"rebuilt","participio"=>"rebuilt","traduccion"=>"Reconstruir"),
        array("infinitivo"=>"rid","Pasado"=>"rid","participio"=>"rid","traduccion"=>"Librarse."),
        array("infinitivo"=>"ride","Pasado"=>"rode","participio"=>"ridden","traduccion"=>"Rodar"),
        array("infinitivo"=>"ring","Pasado"=>"rang","participio"=>"rung","traduccion"=>"Tocar"),
        array("infinitivo"=>"rise","Pasado"=>"rose","participio"=>"risen","traduccion"=>"Ascender"),
        array("infinitivo"=>"run","Pasado"=>"ran","participio"=>"run","traduccion"=>"Correr"),
        array("infinitivo"=>"saw","Pasado"=>"sawed","participio"=>"sawn","traduccion"=>"serrar"),
        array("infinitivo"=>"say","Pasado"=>"said","participio"=>"said","traduccion"=>"Decir"),
        array("infinitivo"=>"see","Pasado"=>"saw","participio"=>"seen","traduccion"=>"Ver"),
        array("infinitivo"=>"seek","Pasado"=>"sought","participio"=>"sought","traduccion"=>"Buscar"),
        array("infinitivo"=>"sell","Pasado"=>"sold","participio"=>"sold","traduccion"=>"Vender"),
        array("infinitivo"=>"send","Pasado"=>"sent","participio"=>"sent","traduccion"=>"Enviar"),
        array("infinitivo"=>"set","Pasado"=>"set","participio"=>"set","traduccion"=>"Instalar"),
        array("infinitivo"=>"shake","Pasado"=>"shook","participio"=>"shaken","traduccion"=>"Sacudir"),
        array("infinitivo"=>"shed","Pasado"=>"shed","participio"=>"shed","traduccion"=>"Derramar"),
        array("infinitivo"=>"shine","Pasado"=>"shone","participio"=>"shone","traduccion"=>"Brillar"),
        array("infinitivo"=>"shoot","Pasado"=>"shot","participio"=>"shot","traduccion"=>"Disparar"),
        array("infinitivo"=>"show","Pasado"=>"showed","participio"=>"shown","traduccion"=>"Mostrar"),
        array("infinitivo"=>"shrink","Pasado"=>"shrank","participio"=>"shrunk","traduccion"=>"Encoger"),
        array("infinitivo"=>"shut","Pasado"=>"shut","participio"=>"shut","traduccion"=>"Cerrar"),
        array("infinitivo"=>"sing","Pasado"=>"sang","participio"=>"sung","traduccion"=>"Cantar"),
        array("infinitivo"=>"sink","Pasado"=>"sank","participio"=>"sunk","traduccion"=>"Hundir"),
        array("infinitivo"=>"sit","Pasado"=>"sat","participio"=>"sat","traduccion"=>"Sentarse"),
        array("infinitivo"=>"sleep","Pasado"=>"slept","participio"=>"slept","traduccion"=>"Dormir"),
        array("infinitivo"=>"slide","Pasado"=>"slid","participio"=>"slid(den)","traduccion"=>"Resbalar"),
        array("infinitivo"=>"smell","Pasado"=>"smelt","participio"=>"smelt","traduccion"=>"Oler"),
        array("infinitivo"=>"speak","Pasado"=>"spoke","participio"=>"spoken","traduccion"=>"Hablar"),
        array("infinitivo"=>"speed","Pasado"=>"sped","participio"=>"sped","traduccion"=>"Acelerar"),
        array("infinitivo"=>"spend","Pasado"=>"spent","participio"=>"spent","traduccion"=>"Gastar"),
        array("infinitivo"=>"spill","Pasado"=>"spilt","participio"=>"spilt","traduccion"=>"Derramar"),
        array("infinitivo"=>"spin","Pasado"=>"spun","participio"=>"spun","traduccion"=>"Tornear"),
        array("infinitivo"=>"split","Pasado"=>"split","participio"=>"split","traduccion"=>"Partir"),
        array("infinitivo"=>"spoil","Pasado"=>"spoilt","participio"=>"spoilt","traduccion"=>"Deteriorar"),
        array("infinitivo"=>"spread","Pasado"=>"spread","participio"=>"spread","traduccion"=>"Extender"),
        array("infinitivo"=>"spring","Pasado"=>"sprang","participio"=>"sprung","traduccion"=>"Saltar,"),
        array("infinitivo"=>"stand","Pasado"=>"stood","participio"=>"stood","traduccion"=>"Pararse"),
        array("infinitivo"=>"steal","Pasado"=>"stole","participio"=>"stolen","traduccion"=>"Robar"),
        array("infinitivo"=>"stick","Pasado"=>"stuck","participio"=>"stuck","traduccion"=>"Pegar"),
        array("infinitivo"=>"stink","Pasado"=>"stank","participio"=>"stunk","traduccion"=>"apestar"),
        array("infinitivo"=>"strike","Pasado"=>"struck","participio"=>"struck","traduccion"=>"Golpear"),
        array("infinitivo"=>"swell","Pasado"=>"swelled","participio"=>"swollen","traduccion"=>"Hinchar"),
        array("infinitivo"=>"swim","Pasado"=>"swam","participio"=>"swum","traduccion"=>"Nadar"),
        array("infinitivo"=>"swing","Pasado"=>"swung","participio"=>"swung","traduccion"=>"Balancearse"),
        array("infinitivo"=>"take","Pasado"=>"took","participio"=>"taken","traduccion"=>"Tomar"),
        array("infinitivo"=>"teach","Pasado"=>"taught","participio"=>"taught","traduccion"=>"EnseÃ±ar"),
        array("infinitivo"=>"tear","Pasado"=>"tore","participio"=>"torn","traduccion"=>"Romper"),
        array("infinitivo"=>"tell","Pasado"=>"told","participio"=>"told","traduccion"=>"Decir"),
        array("infinitivo"=>"think","Pasado"=>"thought","participio"=>"thought","traduccion"=>"Pensar"),
        array("infinitivo"=>"throw","Pasado"=>"threw","participio"=>"thrown","traduccion"=>"Lanzar"),
        array("infinitivo"=>"thrust","Pasado"=>"thrust","participio"=>"thrust","traduccion"=>"empujar"),
        array("infinitivo"=>"undergo","Pasado"=>"underwent","participio"=>"undergone","traduccion"=>"Sufrir"),
        array("infinitivo"=>"understand","Pasado"=>"understood","participio"=>"understood","traduccion"=>"Comprender."),
        array("infinitivo"=>"undertake","Pasado"=>"undertook","participio"=>"undertaken","traduccion"=>"Emprender"),
        array("infinitivo"=>"undo","Pasado"=>"undid","participio"=>"undone","traduccion"=>"Desarmar"),
        array("infinitivo"=>"wake","Pasado"=>"woke","participio"=>"woken","traduccion"=>"Despertar"),
        array("infinitivo"=>"wear","Pasado"=>"Wore","participio"=>"worn","traduccion"=>"usar."),
        array("infinitivo"=>"win","Pasado"=>"Won","participio"=>"won","traduccion"=>"Ganar"),
        array("infinitivo"=>"wind","Pasado"=>"Wound","participio"=>"wound","traduccion"=>"Enroscar"),
        array("infinitivo"=>"withdraw","Pasado"=>"Withdrew","participio"=>"withdrawn","traduccion"=>"Retirar"),
        array("infinitivo"=>"withstand","Pasado"=>"Withstood","participio"=>"withstood","traduccion"=>"Resistir")

    );



    $errorNumDif = "";
    $errorNumVerbos = "";
    $verbosGenerados = array();
    $value = "";

    //$tiemposappears = array();
    $errorTiempoVerbal = "";

    $titleTiempoVerbales = array("infinitivo","Pasado","participio","traduccion");

    $isError = false;
    $isErrorInputTiempos = false;

    $num_verbos = "";
    $num_dif = "";

    if(isset($_POST['submit'])){
        $num_verbos = $_POST['num_verbos'];
        $num_dif = $_POST['num_dif'];


        if ($num_dif<1||$num_dif>3){
            $errorNumDif = "La dificultad debe contener un número entre 1 y 3.";
            $isError = true;
        }
        if ($num_verbos<1||$num_verbos>count($verbos)){
            $errorNumVerbos = "El número de verbos debe estar entre 1 y ".count($verbos);
            $isError = true;
        }
    }else if(isset($_POST['comprobar'])){
        $num_verbos = $_POST['num_verbos'];
        $num_dif = $_POST['num_dif'];
    }


    echo '<p class="title">'.'Proyecto verbos irregulares'.'</p>';

    echo '
    <form action="'.$_SERVER['PHP_SELF'].'" method="post">
        <label for="num_dif">Dificultad(1-3)</label>
        <input id="num_dif" type="text" name="num_dif" value="'.$num_dif.'"/><a class="error">* '.$errorNumDif.'</a>
        
        <label for="num_verbos">Número de verbos</label>
        <input id="num_verbos" type="text" name="num_verbos" value="'.$num_verbos.'"/><a class="error">* '.$errorNumVerbos.'</a>
        
        <input class="button" type="submit" name="submit" value="Jugar"/>
    </form>
    
    ';


    if((isset($_POST['submit'])||isset($_POST['comprobar'])||$isErrorInputTiempos) && !$isError){
        echo '<table>';
        echo '<tr>';
        echo'<td style="padding: 10px;font-size: 1em; font-weight: bold; ">Infinitivo</td>';
        echo'<td style="padding: 10px;font-size: 1em; font-weight: bold; ">Pasado</td>';
        echo'<td style="padding: 10px;font-size: 1em; font-weight: bold; ">Participio</td>';
        echo'<td style="padding: 10px;font-size: 1em; font-weight: bold; ">Traducción</td>';
        echo '</tr>';
        echo '<form action="'.$_SERVER['PHP_SELF'].'" method="post" >';

        if(!isset($_POST['comprobar'])){//generar Tiempos y verbos aleatorios
            
            for ($i = 0; $i < $num_verbos; $i++){
                do{
                    $randomVerbo = rand(0,count($verbos)-1);
                }while(in_array($randomVerbo,$verbosGenerados));
                $verbosGenerados[$randomVerbo] = array();
                for ($j = 0; $j < $num_dif; $j++){
                    do{
                        $randomTiempo = rand(0,3);
                    }while(in_array($randomTiempo,$verbosGenerados[$randomVerbo]));
                    $verbosGenerados[$randomVerbo][$j] = $randomTiempo;
                }
            }
        }

        $aciertos = 0;
        $noAcertados = 0;
        $verboError = "";
$style = "color:#000;";
        $verboError = "";
        foreach (isset($_POST['comprobar'])?$_POST['inputTiempo']:$verbosGenerados as $verbo => $tiempoVerbal){
            echo '<tr>';
            for ($i = 0; $i < 4 ; $i++){
                echo "<td>";
                //isset($_POST['comprobar'])?in_array($i,$tiempoVerbal) || array_key_exists($i,$tiempoVerbal):in_array($i,$tiempoVerbal)
                if(isset($_POST['comprobar'])?array_key_exists($i,$tiempoVerbal):in_array($i,$tiempoVerbal)){
                    if(isset($_POST["inputTiempo"])){
                        $value = $_POST["inputTiempo"][$verbo][$i];
                    }
                    
                    if(isset($_POST['comprobar'])){
                        if($value == $verbos[$verbo][$titleTiempoVerbales[$i]]){
                            $style = "color:#00b23b;";
                            $aciertos++;
                        }else{
                            $style = "color:#ff0000;";
                            $noAcertados++;
                            $verboError = $verbos[$verbo][$titleTiempoVerbales[$i]]; //Almacena el verbo correcto que se ha introducido de forma erronea por el usuario, para mostrar la solución
                        }
                    }

                    if($value=="")//comprobar si la variable que almacena el valor de entrada input, está vacío o no
                        echo '<input type="text" style="'.$style.'" name ="inputTiempo['.$verbo.']['.$i.']" value="'.$verboError.'">';
                    else
                        echo '<input type="text" style="'.$style.'" name ="inputTiempo['.$verbo.']['.$i.']" value="'.$value.'">';

                }else{

                    echo '<input type="text" disabled name ="inputTiempo['.$verbo.']['.$i.']" value="'.$verbos[$verbo][$titleTiempoVerbales[$i]].'">';

                }
                echo "</td>";
            }

            echo '</tr>';
        }
        echo '</table>';
        echo '<input type="hidden" name="num_dif" value="'.$num_dif.'">';
        echo '<input type="hidden" name="num_verbos" value="'.$num_verbos.'">';


        echo '<input type="submit" class="button" name="comprobar" value="Comprobar">';

        echo '</table>';
        echo '</form>';
        if(isset($_POST['comprobar'])) {
            echo '<h3>Aciertos: ' . $aciertos . '</h3>';
            echo '<h3>No acertados: ' . $noAcertados . '</h3>';
        }

    }


   
?>
 <a href="verCodigo.php?src=proyecto_verbos_irregulares.php"> 
        <h3>Ver código</h3> 
      </a>

